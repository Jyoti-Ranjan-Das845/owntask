<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Question For You</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #210510 0%, #6a0f32 40%, #5a1230 70%, #b9375e 100%);
      padding: 20px;
      overflow: hidden;
    }

    .entry-container {
      width: 100%;
      max-width: 450px;
      opacity: 1;
      transition: all 0.8s ease-out;
    }

    .entry-container.fade-out {
      opacity: 0;
      filter: blur(20px);
      transform: scale(0.95);
    }

    .question-card {
      background: rgba(33, 5, 16, 0.85);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 3.5rem 2.5rem;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6),
                  0 0 0 1px rgba(255, 255, 255, 0.1);
      text-align: center;
    }

    .small-header {
      font-size: 0.75rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(255, 238, 247, 0.6);
      font-weight: 500;
      margin-bottom: 1.5rem;
    }

    .main-question {
      font-family: 'Playfair Display', serif;
      font-size: 1.75rem;
      line-height: 1.4;
      color: #ffeef7;
      font-weight: 600;
      margin-bottom: 2.5rem;
    }

    .input-wrapper {
      margin-bottom: 1.5rem;
    }

    .nickname-input {
      width: 100%;
      padding: 1.1rem 1.5rem;
      font-size: 1rem;
      font-family: 'Poppins', sans-serif;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      color: #ffeef7;
      text-align: center;
      transition: all 0.3s ease;
      outline: none;
    }

    .nickname-input::placeholder {
      color: rgba(255, 238, 247, 0.4);
      font-weight: 300;
    }

    .nickname-input:focus {
      background: rgba(0, 0, 0, 0.5);
      border-color: rgba(255, 143, 177, 0.5);
      box-shadow: 0 0 0 4px rgba(255, 143, 177, 0.1);
    }

    .nickname-input.error {
      border-color: rgba(255, 107, 129, 0.8);
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    .unlock-btn {
      width: 100%;
      padding: 1.1rem 2rem;
      font-size: 1.1rem;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ff8fb1 0%, #e87a9b 50%, #d45680 100%);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 20px rgba(255, 143, 177, 0.3);
      margin-bottom: 1.5rem;
      opacity: 0.6;
      pointer-events: none;
    }

    .unlock-btn.active {
      opacity: 1;
      pointer-events: all;
    }

    .unlock-btn.active:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(255, 143, 177, 0.5);
    }

    .unlock-btn.active:active {
      transform: translateY(0);
    }

    .footer-text {
      font-size: 0.9rem;
      color: rgba(255, 238, 247, 0.5);
      font-weight: 300;
      font-style: italic;
    }

    .error-message {
      color: #ff6b81;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s;
      min-height: 20px;
    }

    .error-message.show {
      opacity: 1;
    }

    /* Ribbon & Bow Stage */
    .ribbon-scene {
      position: fixed;
      inset: 0;
      display: none;
      opacity: 0;
      transition: opacity 0.8s;
      z-index: 90;
    }

    .ribbon-scene.active {
      display: block;
      opacity: 1;
    }

    .ribbon {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 60px;
      transform: translateY(-50%);
      background: linear-gradient(180deg, #ff9dbf 0%, #e87a9b 50%, #ff9dbf 100%);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5),
                  inset 0 2px 4px rgba(255, 255, 255, 0.4),
                  inset 0 -2px 4px rgba(0, 0, 0, 0.2);
      transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .ribbon.pulled-left {
      transform: translateX(-100%) translateY(-50%);
    }

    .ribbon.pulled-right {
      transform: translateX(100%) translateY(-50%);
    }

    /* Bow - Using actual bow shape */
    .bow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      cursor: pointer;
      transition: all 0.3s;
      z-index: 91;
      width: 200px;
      height: 120px;
    }

    .bow:hover {
      transform: translate(-50%, -50%) scale(1.05);
    }

    /* Left loop of bow */
    .bow-left {
      position: absolute;
      left: 0;
      top: 0;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #ff9dbf, #e87a9b);
      border-radius: 50% 0 50% 50%;
      transform: rotate(-30deg);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                  inset 2px 2px 8px rgba(255, 255, 255, 0.4),
                  inset -2px -2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Right loop of bow */
    .bow-right {
      position: absolute;
      right: 0;
      top: 0;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #ff9dbf, #e87a9b);
      border-radius: 0 50% 50% 50%;
      transform: rotate(30deg);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                  inset 2px 2px 8px rgba(255, 255, 255, 0.4),
                  inset -2px -2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Center knot of bow */
    .bow-center {
      position: absolute;
      left: 50%;
      top: 30%;
      transform: translate(-50%, -50%);
      width: 45px;
      height: 50px;
      background: linear-gradient(180deg, #e87a9b, #d45680);
      border-radius: 8px;
      z-index: 2;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                  inset 2px 2px 8px rgba(255, 255, 255, 0.4),
                  inset -2px -2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Bow tails */
    .bow-tail-left, .bow-tail-right {
      position: absolute;
      top: 60%;
      width: 35px;
      height: 70px;
      background: linear-gradient(135deg, #ff9dbf, #e87a9b);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2),
                  inset 1px 1px 4px rgba(255, 255, 255, 0.3);
    }

    .bow-tail-left {
      left: 35%;
      transform: rotate(-15deg);
      clip-path: polygon(70% 0, 100% 0, 30% 100%, 0 100%);
    }

    .bow-tail-right {
      right: 35%;
      transform: rotate(15deg);
      clip-path: polygon(0 0, 30% 0, 100% 100%, 70% 100%);
    }

    .pull-text {
      position: absolute;
      bottom: 30%;
      left: 50%;
      transform: translateX(-50%);
      color: #ffeef7;
      font-size: 1.5rem;
      font-weight: 300;
      text-align: center;
    }

    .pull-text .hand {
      font-size: 2rem;
      display: block;
      margin-top: 0.5rem;
      animation: pointDown 1.5s ease-in-out infinite;
    }

    @keyframes pointDown {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(10px); }
    }

    /* Falling Petals - Using actual petal image */
    .petal {
      position: fixed;
      width: 100px;
      height: 100px;
      background-image: url('images/petal.png');
      background-size: contain;
      background-repeat: no-repeat;
      opacity: 0.85;
      pointer-events: none;
      z-index: 999;
    }

    @keyframes fallPetal {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.85;
      }
      50% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(110vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Preview Stage - appears in center while petals fall */
    .preview-stage {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 1.2s ease, visibility 0s linear 1.2s;
      z-index: 1000;
      pointer-events: none;
    }

    .preview-stage.active {
      opacity: 1;
      visibility: visible;
      transition: opacity 1.2s ease, visibility 0s linear 0s;
    }

    .preview-card {
      background: rgba(33, 5, 16, 0.9);
      backdrop-filter: blur(20px);
      border-radius: 32px;
      padding: 2.5rem;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
      max-width: 1000px;
      width: 90%;
      transform: scale(0.85) translateY(20px);
      opacity: 0;
      transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1),
                  opacity 1.2s ease;
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 3rem;
      align-items: center;
      border: 3px dashed rgba(255, 179, 217, 0.4);
      pointer-events: all;
    }

    .preview-stage.active .preview-card {
      transform: scale(1) translateY(0);
      opacity: 1;
    }

    /* Left side - Photo */
    .preview-photo-section {
      position: relative;
    }

    .preview-image-box {
      background: linear-gradient(135deg, #ffc1e0 0%, #ffb3d9 100%);
      border-radius: 24px;
      padding: 0;
      position: relative;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    .preview-image-box img {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 24px;
      object-fit: cover;
    }

    /* Right side - Text Content */
    .preview-text-section {
      color: white;
    }

    .welcome-header {
      font-size: 0.75rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 500;
      margin-bottom: 1.5rem;
    }

    .preview-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      line-height: 1.3;
      color: #ffb3d9;
      margin-bottom: 1.5rem;
      font-weight: 700;
    }

    .preview-description {
      font-size: 1rem;
      line-height: 1.7;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 2rem;
    }

    .begin-journey-btn {
      padding: 1rem 2.5rem;
      font-size: 0.95rem;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      background: linear-gradient(135deg, #e87a9b, #d45680);
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(232, 122, 155, 0.4);
      display: inline-block;
    }

    .begin-journey-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(232, 122, 155, 0.6);
    }

    /* Mobile responsive */
    @media (max-width: 500px) {
      .question-card {
        padding: 2.5rem 1.8rem;
      }

      .main-question {
        font-size: 1.5rem;
      }

      .nickname-input {
        padding: 1rem 1.2rem;
        font-size: 0.95rem;
      }

      .unlock-btn {
        padding: 1rem 1.5rem;
        font-size: 1rem;
      }

      .preview-card {
        grid-template-columns: 1fr;
        padding: 1rem;
        max-width: 90vw;
        max-height: 90vh;
        gap: 1rem;
        overflow-y: auto;
      }

      .preview-image-box {
        max-height: 30vh;
      }

      .preview-image-box img {
        max-height: 30vh;
        object-fit: cover;
      }

      .preview-title {
        font-size: 1.5rem;
        margin-bottom: 0.8rem;
      }

      .preview-description {
        font-size: 0.85rem;
        margin-bottom: 1rem;
        line-height: 1.5;
      }

      .begin-journey-btn {
        padding: 0.9rem 2rem;
        font-size: 0.85rem;
      }

      .petal {
        width: 80px;
        height: 80px;
      }

      .bow {
        width: 150px;
        height: 90px;
      }

      .bow-left, .bow-right {
        width: 60px;
        height: 60px;
      }

      .bow-center {
        width: 35px;
        height: 40px;
      }

      .bow-tail-left, .bow-tail-right {
        width: 28px;
        height: 55px;
      }

      .pull-text {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="entry-container" id="entryContainer">
    <div class="question-card">
      <div class="small-header">A QUESTION FOR YOU</div>

      <h1 class="main-question">
        What nickname do I always call you by?
      </h1>

      <div class="input-wrapper">
        <input
          type="text"
          class="nickname-input"
          id="nicknameInput"
          placeholder="Sooo...?"
          autocomplete="off"
          autofocus
        />
        <div class="error-message" id="errorMessage">Not quite... try again ðŸ’”</div>
      </div>

      <button class="unlock-btn" id="unlockBtn">Unlock</button>

      <div class="footer-text">Answer with love.</div>
    </div>
  </div>

  <!-- Ribbon & Bow Stage -->
  <div class="ribbon-scene" id="ribbonScene">
    <div class="ribbon" id="ribbonLeft"></div>
    <div class="ribbon" id="ribbonRight"></div>
    <div class="bow" id="bow">
      <div class="bow-left"></div>
      <div class="bow-right"></div>
      <div class="bow-center"></div>
      <div class="bow-tail-left"></div>
      <div class="bow-tail-right"></div>
    </div>
    <div class="pull-text">
      Pull it to open
      <span class="hand">ðŸ‘†</span>
    </div>
  </div>

  <!-- Petals Container -->
  <div id="petalsContainer"></div>

  <!-- Preview Stage -->
  <div class="preview-stage" id="previewStage">
    <div class="preview-card">
      <!-- Left Side - Photo -->
      <div class="preview-photo-section">
        <div class="preview-image-box">
          <img src="images/preview.png" alt="Us" />
        </div>
      </div>

      <!-- Right Side - Text Content -->
      <div class="preview-text-section">
        <div class="welcome-header">WELCOME, MY SONUSS</div>
        <h2 class="preview-title">Every adventure starts with us</h2>
        <p class="preview-description">
          This space is for the next chapterâ€”where our favorite memories meet the surprises I've been putting together just for you. Scroll when you're ready to see what's waiting.
        </p>
        <button class="begin-journey-btn" id="beginJourneyBtn">
          BEGIN OUR JOURNEY
        </button>
      </div>
    </div>
  </div>

  <script>
    const nicknameInput = document.getElementById('nicknameInput');
    const unlockBtn = document.getElementById('unlockBtn');
    const errorMessage = document.getElementById('errorMessage');
    const entryContainer = document.getElementById('entryContainer');
    const ribbonScene = document.getElementById('ribbonScene');
    const ribbonLeft = document.getElementById('ribbonLeft');
    const ribbonRight = document.getElementById('ribbonRight');
    const bow = document.getElementById('bow');
    const petalsContainer = document.getElementById('petalsContainer');
    const previewStage = document.getElementById('previewStage');
    const beginJourneyBtn = document.getElementById('beginJourneyBtn');

    // Validate answer - accepts s-o-n-u-s or s-o-n-u-s-i pattern with repeating letters
    function isValidAnswer(input) {
      const text = input.trim().toLowerCase();
      if (text.length === 0) return false;

      // Pattern: s+ o+ n+ u+ (s+ (i+)?)?
      // Matches two patterns:
      // 1. sonus (with repeating letters): sooonnuusss, sonnuss, etc.
      // 2. sonusi (with repeating letters): soonuussi, sonnuusiii, etc.
      const pattern = /^s+o+n+u+(s+(i+)?)?$/;
      return pattern.test(text);
    }

    // Enable/disable unlock button based on input
    nicknameInput.addEventListener('input', () => {
      const hasText = nicknameInput.value.trim().length > 0;

      if (hasText) {
        unlockBtn.classList.add('active');
      } else {
        unlockBtn.classList.remove('active');
      }

      // Clear error state when typing
      nicknameInput.classList.remove('error');
      errorMessage.classList.remove('show');
    });

    // Check answer on button click
    unlockBtn.addEventListener('click', checkAnswer);

    // Check answer on Enter key
    nicknameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && unlockBtn.classList.contains('active')) {
        checkAnswer();
      }
    });

    function checkAnswer() {
      const answer = nicknameInput.value.trim().toLowerCase();

      if (isValidAnswer(answer)) {
        // Correct answer! Blur out asking page and show ribbon scene
        entryContainer.classList.add('fade-out');

        setTimeout(() => {
          ribbonScene.classList.add('active');
        }, 800);
      } else {
        // Wrong answer - show error
        nicknameInput.classList.add('error');
        errorMessage.classList.add('show');

        // Clear input after shake animation
        setTimeout(() => {
          nicknameInput.value = '';
          unlockBtn.classList.remove('active');
        }, 500);
      }
    }

    // Pull the bow to open ribbon
    bow.addEventListener('click', () => {
      ribbonLeft.classList.add('pulled-left');
      ribbonRight.classList.add('pulled-right');
      bow.style.opacity = '0';

      // Hide the "Pull it to open" text
      document.querySelector('.pull-text').style.opacity = '0';

      // Create falling petals after 300ms
      setTimeout(createPetals, 300);

      // Show preview card after petals have fallen (after 3 seconds)
      setTimeout(() => {
        previewStage.classList.add('active');
      }, 3000);
    });

    // Create 100 large falling petals
    function createPetals() {
      for (let i = 0; i < 100; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';

        const leftPos = Math.random() * 100;
        const delay = Math.random() * 3;
        const duration = 5 + Math.random() * 4;
        const rotation = Math.random() * 360;

        petal.style.left = leftPos + '%';
        petal.style.top = '-120px';
        petal.style.transform = `rotate(${rotation}deg)`;
        petal.style.animation = `fallPetal ${duration}s linear ${delay}s forwards`;

        petalsContainer.appendChild(petal);

        // Remove petal after animation
        setTimeout(() => petal.remove(), (duration + delay) * 1000);
      }
    }

    // Begin Journey button - go to timeline
    beginJourneyBtn.addEventListener('click', () => {
      window.location.href = 'timeline.html';
    });

    // Auto-focus input on page load
    nicknameInput.focus();
  </script>
</body>
</html>
